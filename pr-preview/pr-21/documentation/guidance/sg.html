<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>EUCS IDAM End User Guidance</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://ministryofjustice.github.io/staff-identity-technical-documentation/documentation/guidance/sg.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="ministryofjustice.github.io" />
      <meta name="twitter:image" content="https://ministryofjustice.github.io/staff-identity-technical-documentation/images/govuk-large.png" />
      <meta name="twitter:title" content="EUCS IDAM End User Guidance" />
      <meta name="twitter:url" content="https://ministryofjustice.github.io/staff-identity-technical-documentation/documentation/guidance/sg.html" />

      <meta property="og:image" content="https://ministryofjustice.github.io/staff-identity-technical-documentation/images/govuk-large.png" />
      <meta property="og:site_name" content="EUCS IDAM End User Guidance" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://ministryofjustice.github.io/staff-identity-technical-documentation/documentation/guidance/sg.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 132 97"
            height="30"
            width="36"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
            ></path>
          </svg>
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        <span class="govuk-header__product-name">
          EUCS IDAM End User Guidance
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/staff-identity-technical-documentation">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              
              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#entra-security-groups"><span>Entra Security Groups</span></a>
    <ul>
      <li>
        <a href="#self-service-security-group"><span>Self Service Security Group</span></a>
        <ul>
          <li>
            <a href="#governance"><span>Governance</span></a>
          </li>
          <li>
            <a href="#how-to-manage-your-security-group"><span>How to manage your Security Group</span></a>
            <ul>
              <li>
                <a href="#adding-removing-users"><span>Adding/Removing Users</span></a>
              </li>
              <li>
                <a href="#adding-removing-owners"><span>Adding/Removing Owners</span></a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <a href="#idam-team-managed-static-security-group"><span>IDAM Team Managed Static Security Group</span></a>
        <ul>
          <li>
            <a href="#adding-a-new-entra-security-group"><span>Adding a new Entra Security Group</span></a>
          </li>
          <li>
            <a href="#adding-removing-new-users-to-a-entra-security-group"><span>Adding/Removing new users to a Entra Security Group</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#send-security-groups-in-user-access-token-claim"><span>Send Security Groups in user Access token claim</span></a>
      </li>
      <li>
        <a href="#resources"><span>Resources</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="entra-security-groups">Entra Security Groups</h1>
<p>Entra Security Groups have the following uses.</p>

<ul>
<li>Allow you to control who has access to authenticate with your integrated application</li>
<li>Classify groups of users to manage Roles and Permissions within an integrated application (see <a href="#send-security-groups-in-user-access-token-claim">Send Security Groups user belongs to in the authentication token</a>)</li>
</ul>
<p>Entra Security Groups are different from Azure Groups which provide permissions to resources within Azure.</p>
<p>A user can belong to 1 or many groups at one time.</p>
<p>There are four types of configuration your Application Registration may use for Entra Security Groups.</p>
<div class="table-container">
        <table>
          <tr>
<th>Name</th>
<th>Description</th>
</tr><tr>
<td>All MoJ Users Security Group</td>
<td>Anyone who has an identity within the Ministry of Justice in Entra will be able to Authenticate to your application. Any Joiners or Leavers will automatically be added or removed for you.</td>
</tr><tr>
<td>Dynamic Security Group</td>
<td>Built around pattern matching, this type of group allows you to specify automatic group assignment of Joiners and Leavers. This can be for example <code>Judiciary Only Group</code> that is setup to automatically add any users where their email address ends in <code>@judiciary.uk</code>.</td>
</tr><tr>
<td><a href="#idam-team-managed-static-security-group">IDAM Team Managed Static Security Group</a></td>
<td>A group where users are manually added or removed as required. An example of this may be a small set of users across different departments who need access to a COTS application.</td>
</tr><tr>
<td><a href="#self-service-security-group">Self Service Security Group</a></td>
<td>The ability to delegate responsibility for the management of users in the Security Group to a set of defined Owners.</td>
</tr>
        </table>
      </div><h2 id="self-service-security-group">Self Service Security Group</h2>
<p>Upon request, the IDAM Team will set up 1 or many Security Groups for you and assign 2 or more people within your team as Owners of the group. These Owners will be responsible for the management of Users and Owners assigned to the group moving forward.</p>
<h3 id="governance">Governance</h3>
<p>The IDAM Team will monitor Governance policies on the groups created. This includes</p>

<ul>
<li>Does the group have a minimum of 2 Owners</li>
<li>Does the group only contain Members and not Guest users</li>
<li>After 365 days, check if the group is still required</li>
</ul>
<p>We will use the Owners of the group for any automated notifications for these policies where they are not met. This is to ensure groups are maintained and secure over time.</p>
<h3 id="how-to-manage-your-security-group">How to manage your Security Group</h3>
<p>To manage your Security Groups, you will use the <a href="https://myaccount.microsoft.com/groups/">Microsoft My Groups</a> interface.</p>
<h4 id="adding-removing-users">Adding/Removing Users</h4>

<ul>
<li>Go to the <a href="https://myaccount.microsoft.com/groups/">Microsoft My Groups</a> web site</li>
<li>Sign in with your Justice account</li>
<li>Click <code>Groups I own</code></li>
<li>Click on the Group they wish to manage</li>
<li>Click <code>Members</code></li>
<li>Click the <code>Add</code> button to begin adding new members</li>
</ul>
<h4 id="adding-removing-owners">Adding/Removing Owners</h4>

<ul>
<li>Go to the <a href="https://myaccount.microsoft.com/groups/">Microsoft My Groups</a> web site</li>
<li>Sign in with your Justice account</li>
<li>Click <code>Groups I own</code></li>
<li>Click on the Group they wish to manage</li>
<li>Click <code>Owners</code></li>
<li>Click the <code>Add</code> button to begin adding new owners</li>
</ul>
<h2 id="idam-team-managed-static-security-group">IDAM Team Managed Static Security Group</h2>
<h3 id="adding-a-new-entra-security-group">Adding a new Entra Security Group</h3>
<p>You will need to raise a Demand through the existing demand process for this option. This will be triaged by the Demand Team and sent through to the IDAM Team to action.</p>
<p>The link to the demand process can be found at <a href="https://justiceuk.sharepoint.com/sites/DemandandBusinessRelationshipManagement/SitePages/New-Demand-Request.aspx">Technology Services New Demand Request</a></p>
<p>You should provide the following information with the demand request.</p>

<ul>
<li>Who will be the Group Owners

<ul>
<li>minimum of 2 people, these people will be responsible for sign off of adding and removing users in the future</li>
<li>1 or more Business Owners</li>
<li>1 or more Technical Owners</li>
</ul></li>
<li>Name of the group

<ul>
<li>Pattern should be all lowercase <code>&lt;organisation&gt;-&lt;team&gt;-&lt;function-of-group&gt;</code>. e.g. <code>eucs-idam-cmsadministrators</code></li>
</ul></li>
<li>Description on the purpose of the group (max 250 charaters)</li>
</ul>

<blockquote>
<p>It is important that there are always 2 Owners minimum for these groups. Requests to add or remove users in the future will only be approved if these owners are the requestors or provide sign off.</p>
</blockquote>
<h3 id="adding-removing-new-users-to-a-entra-security-group">Adding/Removing new users to a Entra Security Group</h3>
<p>You will need to raise a Demand through the existing demand process for this option. This will be triaged by the Demand Team and sent through to the IDAM Team to action.</p>
<p>The link to the demand process can be found at <a href="https://justiceuk.sharepoint.com/sites/DemandandBusinessRelationshipManagement/SitePages/New-Demand-Request.aspx">Technology Services New Demand Request</a></p>
<p>You will need to provide the following details</p>
<div class="table-container">
        <table>
          <tr>
<th>Field</th>
<th>Description</th>
</tr><tr>
<td>Users</td>
<td>List of users email addresses to add to the group.</td>
</tr><tr>
<td>Group Name</td>
<td>Group name in Entra ID to add users too.</td>
</tr><tr>
<td>Environment</td>
<td>Is this for the Entra DEV, NLE or LIVE environment.</td>
</tr>
        </table>
      </div><p>This will then be assigned to the IDAM team to schedule and communicate when we will complete the request.</p>
<h2 id="send-security-groups-in-user-access-token-claim">Send Security Groups in user Access token claim</h2>
<p>Optionally, we can enable your SSO Application Registration to send a list of Security Group GUIDs that the user belongs too.</p>
<p>This can be benefitial for modern applications that require levels of authorisation within their application.</p>
<p>For example, you could create 3 Security Groups as shown below and when a user logs in, the GUID will be passed down to the application. From here you can setup your application to assign the role appropriate for their group.</p>
<div class="table-container">
        <table>
          <tr>
<th>Security Group Name</th>
<th>GUID</th>
<th>Description</th>
</tr><tr>
<td>eucs-idamn-cms-admins</td>
<td>d7bbc93a-03e4-4f7f-83c9-5a6587b5412f</td>
<td>Users assigned to this group have full admin access to application</td>
</tr><tr>
<td>eucs-idam-cms-contributors</td>
<td>bb944abe-c965-43d2-81e5-ab2583d95b53</td>
<td>Users assigned to this group have contributor access to application</td>
</tr><tr>
<td>eucs-idam-cms-readers</td>
<td>1c0500ad-df00-4101-9050-9b90440043c8</td>
<td>Users assigned to this group have read only access to application</td>
</tr>
        </table>
      </div><p>Instead of creating more resources to manage users and groups, you can use the Self Service Security Groups within Entra ID to manage users, and the groups they belong too via the <a href="https://myaccount.microsoft.com/groups/">Microsoft My Groups interface</a>.</p>
<p>Once the IDAM Team have setup the Security Group for you, we will pass the GUIDs to you and enable this functionality for your application.</p>
<p>For more information on what information exists within the access token, see this Microsoft article <a href="https://learn.microsoft.com/en-us/entra/identity-platform/access-token-claims-reference">https://learn.microsoft.com/en-us/entra/identity-platform/access-token-claims-reference</a></p>
<h2 id="resources">Resources</h2>

<ul>
<li><a href="mailto:idamteam@justice.gov.uk">EUCS IDAM Team Shared Inbox</a></li>
</ul>

            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/staff-identity-technical-documentation/blob/main/source/documentation/guidance/sg.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/staff-identity-technical-documentation/issues/new?body=Problem+with+%27%27+%28https%3A%2F%2Fministryofjustice.github.io%2Fstaff-identity-technical-documentation%2Fdocumentation%2Fguidance%2Fsg.html%29&amp;labels=bug&amp;title=Re%3A+%27%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/staff-identity-technical-documentation">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
