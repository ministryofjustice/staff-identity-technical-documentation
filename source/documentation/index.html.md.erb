<!-- Do not delete this file it is the website entry point -->

# EUCS IDAM guidance

## Renewing existing Application Registration credentials

### Application Registration Client Secret Renewal

To renew a Client Secret used by your integration, you can make a request to the IDAM team via the [ServiceNow Catalogue Item - App Registration Secret - Renew](https://mojprod.service-now.com/moj_sp?id=sc_cat_item&table=sc_cat_item&sys_id=4eaffa8d1b2dce10a1e2ddf0b24bcb14).

You will need to provide the following details

| Field                  | Description                                                                                                                   |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| Application Name       | Name of your application this secret is assigned to.                                                                          |
| Application ID         | Also referred to as your Client ID, this is the ID used in your integration to identify itself.                               |
| Environment            | Is this for the Entra DEV, NLE or LIVE environment.                                                                           |
| Old Secret Expiry Date | This will allow you to have two valid secrets while you update your integrations. We will remove the old secret on this date. |

This will then be assigned to the IDAM team to schedule and communicate when we will complete the request for you.

Once we have generated a new Secret, we will send the requestor of the catalogue item an email with a secure link to access the new credentials. This link will expire after an hour.

You should store this new value in a secure vault once received and remove any traces of it from your computer systems.

[ServiceNow Catalogue Item - App Registration Secret - Renew](https://mojprod.service-now.com/moj_sp?id=sc_cat_item&table=sc_cat_item&sys_id=4eaffa8d1b2dce10a1e2ddf0b24bcb14)

### Application Registration Certificate Renewal

If you Application Registration uses Certificate Authentication for OIDC authentication, the following process will enable you to update your certificate in Entra ID.

- Create your new Certificate
- Export the Public Key (.cer file)
- Raise a Demand Request using the following link [Technology Services New Demand Request](https://justiceuk.sharepoint.com/sites/DemandandBusinessRelationshipManagement/SitePages/New-Demand-Request.aspx)
- Attach the Public Key to the Demand Request
- Provide the following information within the request

| Field                  | Description                                                                                                                   |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| Application Name       | Name of your application this certificate should be assigned to.                                                                         |
| Application ID         | Also referred to as your Client ID, this is the ID used in your integration to identify itself.                               |
| Environment            | Is this for the Entra DEV, NLE or LIVE environment.                                                                           |
| Old Certificate Expiry Date | This will allow you to have two valid certificates while you update your integrations. We will remove the old certificate on this date. |

Once the demand has been raised, the demand team will pass the information to the IDAM team to schedule in an implementation date. We will contact you once the demand has been received to confirm acceptance.

The average implementation time for a demand is 6-8 days. This is due to the IDAM team having to raise a Change Request to update the certificate.

[Technology Services New Demand Request](https://justiceuk.sharepoint.com/sites/DemandandBusinessRelationshipManagement/SitePages/New-Demand-Request.aspx)

## Managing Entra Security Groups

Entra Security Groups allow you to control who has access to authenticate with your integrated application. Entra Security Groups are different from Azure Groups which provide permissions to resources within Azure.

A user can belong to 1 or many groups at one time.

There are three types of configuration your application may use for Entra Security Groups.

| Name                   | Description                                                                                                                   |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| All MoJ Users Group Assigned | Anyone who has an identity within the Ministry of Justice in Entra will be able to Authenticate to your application. Any Joiners or Leavers will automatically be added or removed for you.                                                                                                          |
| Dynamic Group Assigned       | Built around pattern matching, this type of group allows you to specify automatic group assignment of Joiners and Leavers. This can be for example `Judiciary Only Group` that is setup to automatically add any users where their email address ends in `@judiciary.uk`. |
| Static Group                 | A group where users are manually added or removed as required. An example of this may be a small set of users across different departments who need access to a COTS application.                                                                                                                    |

When your application was first created, you may have set up a Entra Security Group. If you have setup a group type of `Static Group` then the following items provide an overview of how you can add or remove users to existing Entra Security Groups that are used by your application.

### Adding new users to a Entra Security Group

To add new users to a Entra Security Group, you can make a request to the IDAM team via the [ServiceNow Catalogue Item - Users in Microsoft Entra Groups- Add](https://mojprod.service-now.com/moj_sp?id=sc_cat_item&table=sc_cat_item&sys_id=a784b93f1b118610a1e2ddf0b24bcbdc).

You will need to provide the following details

| Field       | Description                                         |
|-------------|-----------------------------------------------------|
| Users       | List of users email addresses to add to the group.  |
| Group Name  | Group name in Entra ID to add users too.            |
| Environment | Is this for the Entra DEV, NLE or LIVE environment. |

This will then be assigned to the IDAM team to schedule and communicate when we will complete the request for you.

[ServiceNow Catalogue Item - Users in Microsoft Entra Groups- Add](https://mojprod.service-now.com/moj_sp?id=sc_cat_item&table=sc_cat_item&sys_id=a784b93f1b118610a1e2ddf0b24bcbdc)

### Removing users from a Entra Security Group

To remove users from a Entra Security Group, you can make a request to the IDAM team via the [ServiceNow Catalogue Item - Users in Microsoft Entra Groups - Delete](https://mojprod.service-now.com/moj_sp?id=sc_cat_item&table=sc_cat_item&sys_id=e4e6c73b1bd5861025dc6351f54bcba6).

You will need to provide the following details

| Field       | Description                                         |
|-------------|-----------------------------------------------------|
| Users       | List of users email addresses to add to the group.  |
| Group Name  | Group name in Entra ID to add users too.            |
| Environment | Is this for the Entra DEV, NLE or LIVE environment. |

This will then be assigned to the IDAM team to schedule and communicate when we will complete the request for you.

[ServiceNow Catalogue Item - Users in Microsoft Entra Groups - Delete](https://mojprod.service-now.com/moj_sp?id=sc_cat_item&table=sc_cat_item&sys_id=e4e6c73b1bd5861025dc6351f54bcba6)

## Resources

* [EUCS IDAM Team Shared Inbox](mailto:idamteam@justice.gov.uk)
