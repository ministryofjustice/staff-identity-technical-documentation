<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>End User Compute Services - Identity & Access Management End User Guidance</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://ministryofjustice.github.io/staff-identity-technical-documentation/documentation/fundamentals/tenant-overview.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="ministryofjustice.github.io" />
      <meta name="twitter:image" content="https://ministryofjustice.github.io/staff-identity-technical-documentation/images/govuk-large.png" />
      <meta name="twitter:title" content="End User Compute Services - Identity &amp; Access Management End User Guidance" />
      <meta name="twitter:url" content="https://ministryofjustice.github.io/staff-identity-technical-documentation/documentation/fundamentals/tenant-overview.html" />

      <meta property="og:image" content="https://ministryofjustice.github.io/staff-identity-technical-documentation/images/govuk-large.png" />
      <meta property="og:site_name" content="End User Compute Services - Identity &amp; Access Management End User Guidance" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://ministryofjustice.github.io/staff-identity-technical-documentation/documentation/fundamentals/tenant-overview.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 132 97"
            height="30"
            width="36"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
            ></path>
          </svg>
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        <span class="govuk-header__product-name">
          End User Compute Services - Identity & Access Management End User Guidance
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/staff-identity-technical-documentation">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              
              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#tenant-overview"><span>Tenant Overview</span></a>
    <ul>
      <li>
        <a href="#overview"><span>Overview</span></a>
        <ul>
          <li>
            <a href="#internal-vs-external-workforce-tenants"><span>Internal vs External Workforce Tenants</span></a>
          </li>
          <li>
            <a href="#configuration"><span>Configuration</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#where-to-build-your-application"><span>Where to build your Application</span></a>
        <ul>
          <li>
            <a href="#internal-or-external"><span>Internal or External</span></a>
          </li>
          <li>
            <a href="#standard-sso-applications"><span>Standard SSO Applications</span></a>
          </li>
          <li>
            <a href="#privilieged-sso-applications"><span>Privilieged SSO Applications</span></a>
          </li>
          <li>
            <a href="#examples-of-where-to-build-your-application-s"><span>Examples of where to build your application(s)</span></a>
          </li>
          <li>
            <a href="#automated-testing"><span>Automated Testing</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#section-contents"><span>Section Contents</span></a>
      </li>
      <li>
        <a href="#resources"><span>Resources</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="tenant-overview">Tenant Overview</h1>
<h2 id="overview">Overview</h2>
<p><a href="../../img/fundamentals-tenant-overview.png" rel="noopener noreferrer"><img src="../../img/fundamentals-tenant-overview.png" title="Tenant Overview" alt="Tenant Overview" /></a></p>
<p>We have three environments DEVL, NLE and PROD.</p>
<p>DEVL and PROD contain two Entra ID tenants. An Internal Workforce tenant and a External Workforce tenant.</p>
<p>NLE has only an Internal Workforce tenant.</p>
<h3 id="internal-vs-external-workforce-tenants">Internal vs External Workforce Tenants</h3>
<p>Internal Workforce Tenants are the source of Justice identities and provide application integrations for internal services.</p>
<p>External Workforce Tenants are used for application integrations that are public facing. Identities in this tenant are either Guest users who can sign in to applications as a member of the public or Justice identities that are provisioned from the Internal Workforce tenant via cross tenant sync.</p>
<h3 id="configuration">Configuration</h3>
<p>Each External Workforce Tenant is configured and monitored by a Configuration as Code tool called M365DSC. Internal Workforce Tenants will follow this same pattern soon.</p>
<p>In all tenants, Application Registrations (AR) and Enterprise Applications (EA) are managed via Terraform. In Development, if an integration is more complex, we can provision a temporary Dev admin account for users to access the Entra Portal and configure their application instead of Terraform.</p>
<p>All AR&rsquo;s and EA&rsquo;s within the PROD tenants must be configured by Terraform. Admin accounts will not be available in these environments. This can be done by the integrating service teams or the IDAM team on their behalf.</p>
<h2 id="where-to-build-your-application">Where to build your Application</h2>
<p><a href="../../img/fundamentals-app-tenant.png" rel="noopener noreferrer"><img src="../../img/fundamentals-app-tenant.png" title="Application setup per tenant" alt="Application setup per tenant" /></a></p>
<p>Depending on the types of users who will be signing in to your application, you will need to build your application in either the Internal or External tenant. You will also need to take into account what privileges you will require as this will affect which environment you work in.</p>
<h3 id="internal-or-external">Internal or External</h3>
<p>If you are building an application that only internal Justice users will be authenticating with, then you will build in the Internal Workforce Tenant.</p>
<p>If you are building an application where Guest users will be able to access your applications (such as profressional bodies like Solicitors), then you will build your application in the External Workforce Tenant.</p>
<h3 id="standard-sso-applications">Standard SSO Applications</h3>
<p>In most cases, you will build your application directly into our production tenants. Most application integrations that handle Single Sign On require low permissions (Delegated <code>User.Read</code>) with no additional special configuration. In this case we would class this as a <code>Standard SSO Application</code>. These can be quickly integrated and approved via Terraform.</p>
<p>For example, if you want to setup a DEV, NLE and PROD integration so that you can test your application, you can create 3 different application integrations within the appropriate Production tenant.</p>
<p>For more information on setting up a new <a href="../guidance/appreg.html">Application Registration see this link</a>.</p>
<h3 id="privilieged-sso-applications">Privilieged SSO Applications</h3>
<p>Some integrations may require higher levels of permissions in order to work. This includes</p>

<ul>
<li>Any <code>Application</code> level permissions rather than <code>Delegated</code></li>
<li><code>Application</code> and <code>Delegated</code> permissions like <code>Mail.Read</code> or <code>Sharepoint.ReadAll</code></li>
</ul>
<p>We would class these applications as <code>Privilieged SSO Applications</code>. You can still use Terraform to set these applications up, but we will require some extra steps before we can approve these applications for use.</p>
<p>In any Pull Request, ensure you fill out the details of your application, the permissions being requested and justification for each and how they will be used.</p>
<p>Unlike the Standard SSO Application, we would expect to see this first being built in our DEVL environment. This is especially important for any applications that have <code>ReadWrite</code> permissions.</p>
<p>This is to ensure there is no risk to data loss and the IDAM team can work with you to ensure best practices are being followed.</p>
<p>Before publishing to PROD you will require a Change Request. We will use the information from the Pull Requests created up to this point to ensure all information is auditable and Change Management is satisfied.</p>
<h3 id="examples-of-where-to-build-your-application-s">Examples of where to build your application(s)</h3>
<div class="table-container">
        <table>
          <tr>
<th>Application Description</th>
<th>Tenant Type</th>
<th>Production Environment</th>
<th>Development Environment</th>
<th>Application Type</th>
</tr><tr>
<td>An internal CMS that allows Justice identities to sign in so they can work on cases.</td>
<td>Internal</td>
<td>Yes</td>
<td>No</td>
<td>Standard SSO Application</td>
</tr><tr>
<td>A custom built internal people finder application that allows Justice identities to sign in so they can search all users in the organisation and edit their phone number which updates their user object in Entra.</td>
<td>Internal</td>
<td>Yes</td>
<td>Yes - POC</td>
<td>Privilieged SSO Application</td>
</tr><tr>
<td>A custom built, public facing site that allows Solicitors to log in and process documentation.</td>
<td>External</td>
<td>Yes</td>
<td>No</td>
<td>Standard SSO Application</td>
</tr><tr>
<td>A custom built, public facing site that allows Charities to log in, upload documents and the application saves them to a SharePoint site.</td>
<td>External</td>
<td>Yes</td>
<td>Yes - POC</td>
<td>Privilieged SSO Application</td>
</tr>
        </table>
      </div><h3 id="automated-testing">Automated Testing</h3>
<p>For details on <a href="integration-testing.html">Automated testing, please see this link</a>.</p>
<h2 id="section-contents">Section Contents</h2>

<ul>
<li><a href="tenant-overview.html">Tenant Overview</a></li>
<li><a href="integration-testing.html">Integration Testing</a></li>
<li><a href="token-lifetime.html">Token Lifetime Policy</a></li>
</ul>
<h2 id="resources">Resources</h2>

<ul>
<li><a href="mailto:idam@justice.gov.uk">EUCS IDAM Team Shared Inbox</a></li>
</ul>

            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/staff-identity-technical-documentation/blob/main/source/documentation/fundamentals/tenant-overview.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/staff-identity-technical-documentation/issues/new?body=Problem+with+%27%27+%28https%3A%2F%2Fministryofjustice.github.io%2Fstaff-identity-technical-documentation%2Fdocumentation%2Ffundamentals%2Ftenant-overview.html%29&amp;labels=bug&amp;title=Re%3A+%27%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/staff-identity-technical-documentation">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
